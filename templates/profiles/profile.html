{% extends "base.html" %}

{% block content %}
<div class="profile-container" style="max-width: 1000px; margin: 40px auto; padding: 20px;">
    <div class="profile-header" style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <div style="display: flex; align-items: center; gap: 20px;">
            <div style="width: 100px; height: 100px; background-color: #003366; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-user" style="font-size: 40px; color: white;"></i>
            </div>
            <div>
                <h1 style="color: #003366; margin: 0;">{{ user.username }}</h1>
                <p style="color: #666; margin: 5px 0;">{{ user.get_role_display }}</p>
                <p style="color: #666; margin: 5px 0;">{{ user.email }}</p>
            </div>
        </div>
    </div>

    {% if user.role == 2 %}
    <!-- Vue Hôtelier -->
    <div class="hotels-section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: #003366; margin: 0;">Mes Hôtels</h2>
            <a href="{% url 'hotel-create' %}" style="background-color: #ff5a5f; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-flex; align-items: center;">
                <i class="fas fa-plus" style="margin-right: 8px;"></i>
                Ajouter un hôtel
            </a>
        </div>

        <div class="hotel-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
            {% for hotel in hotels %}
            <div class="hotel-card" style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <img src="{{ hotel.image_url|default:'https://via.placeholder.com/300x200' }}" alt="{{ hotel.name }}" style="width: 100%; height: 150px; object-fit: cover;">
                <div style="padding: 15px;">
                    <h3 style="margin: 0 0 10px; color: #003366;">{{ hotel.name }}</h3>
                    <p style="color: #666; margin: 0 0 10px;">{{ hotel.city }}, {{ hotel.country }}</p>
                    <div style="display: flex; gap: 10px;">
                        <a href="{% url 'hotel-detail' hotel.pk %}" style="flex: 1; text-align: center; padding: 8px; background-color: #003366; color: white; text-decoration: none; border-radius: 4px;">
                            <i class="fas fa-eye"></i> Voir
                        </a>
                        <a href="#" style="flex: 1; text-align: center; padding: 8px; background-color: #28a745; color: white; text-decoration: none; border-radius: 4px;">
                            <i class="fas fa-edit"></i> Modifier
                        </a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div style="grid-column: 1/-1; text-align: center; padding: 40px; background: white; border-radius: 8px;">
                <p style="color: #666; margin-bottom: 20px;">Vous n'avez pas encore d'hôtels.</p>
                <a href="{% url 'hotel-create' %}" style="background-color: #ff5a5f; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">
                    <i class="fas fa-plus"></i> Ajouter votre premier hôtel
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <!-- Vue Client -->
    <div class="reservations-section">
        <h2 style="color: #003366; margin-bottom: 20px;">Mes Réservations</h2>
        
        {% if reservations %}
        <div class="reservations-list">
            {% for reservation in reservations %}
            <div class="reservation-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div>
                        <h3 style="color: #003366; margin: 0 0 10px;">{{ reservation.room.hotel.name }}</h3>
                        <p style="color: #666; margin: 0 0 5px;">
                            <i class="fas fa-map-marker-alt"></i> {{ reservation.room.hotel.city }}
                        </p>
                        <p style="color: #666; margin: 0 0 5px;">
                            <i class="fas fa-bed"></i> {{ reservation.room.room_type }}
                        </p>
                        <p style="color: #666; margin: 0;">
                            <i class="fas fa-calendar"></i> Du {{ reservation.check_in|date:"d/m/Y" }} au {{ reservation.check_out|date:"d/m/Y" }}
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <p style="color: #ff5a5f; font-size: 1.2em; font-weight: 600; margin: 0 0 10px;">{{ reservation.total_price }}€</p>
                        <span style="padding: 5px 10px; border-radius: 20px; font-size: 0.9em; 
                            {% if reservation.status == 'confirmed' %}
                                background-color: #e8f5e9; color: #2e7d32;
                            {% elif reservation.status == 'pending' %}
                                background-color: #fff3e0; color: #ef6c00;
                            {% else %}
                                background-color: #ffebee; color: #c62828;
                            {% endif %}
                        ">
                            {{ reservation.get_status_display }}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div style="text-align: center; padding: 40px; background: white; border-radius: 8px;">
            <p style="color: #666; margin-bottom: 20px;">Vous n'avez pas encore de réservations.</p>
            <a href="{% url 'hotel-list' %}" style="background-color: #ff5a5f; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">
                <i class="fas fa-search"></i> Rechercher un hôtel
            </a>
        </div>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %} 